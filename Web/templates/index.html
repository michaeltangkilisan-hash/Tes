<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sistem Pendeteksi Mata</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='style.css') }}"
    />
  </head>
  <body>
    <div class="page-wrapper">
      <div class="card">
        <h1 class="title">Sistem Pendeteksi Mata</h1>
        <p class="subtitle">
          Aplikasi pendeteksi kondisi mata berbasis pengolahan citra digital.
        </p>

        <form method="POST" class="form">
          <div class="form-group">
            <label>Apakah Anda memakai kacamata?</label>
            <div class="options">
              <label class="option">
                <input type="radio" name="kacamata" value="tidak" required />
                <span>Tidak</span>
              </label>
              <label class="option">
                <input type="radio" name="kacamata" value="ya" />
                <span>Ya</span>
              </label>
            </div>
            <p
              id="kacamata-warning"
              class="hint"
              style="display: none; margin-top: 6px"
            >
              Peringatan: Jika Anda memakai kacamata, hindari lensa yang terlalu gelap karena
              dapat menurunkan akurasi deteksi sistem.
            </p>
          </div>

          <div class="form-group">
            <label>Berapa jumlah mata yang ingin dideteksi?</label>
            <div class="options">
              <label class="option">
                <input type="radio" name="mata" value="2" required />
                <span>2 Mata</span>
              </label>
              <label class="option">
                <input type="radio" name="mata" value="1" />
                <span>1 Mata</span>
              </label>
            </div>
          </div>

          <div class="form-group">
            <label>Pilih mode tampilan kamera:</label>
            <div class="options">
              <label class="option">
                <input type="radio" name="mode" value="1" checked />
                <span>Berwarna (RGB)</span>
              </label>
              <label class="option">
                <input type="radio" name="mode" value="2" />
                <span>Keabuan (Grayscale Manual)</span>
              </label>
            </div>
          </div>

          <button type="submit" class="btn-primary">Mulai Deteksi</button>
        </form>

        {% if message %}
        <div class="message-box">
          {{ message }}
        </div>
        {% endif %}

        <p class="hint">
          Catatan: Setelah menekan tombol, jendela kamera akan terbuka. Tekan tombol
          <strong>'q'</strong> untuk keluar dari tampilan kamera.
        </p>
      </div>
    </div>
    <script>
      (function () {
        const radios = document.querySelectorAll('input[name="kacamata"]');
        const warning = document.getElementById("kacamata-warning");
        if (!warning || !radios.length) return;

        function updateWarning() {
          const selected = document.querySelector('input[name="kacamata"]:checked');
          if (selected && selected.value === "ya") {
            warning.style.display = "block";
          } else {
            warning.style.display = "none";
          }
        }

        radios.forEach((radio) => {
          radio.addEventListener("change", updateWarning);
        });

        // Setel tampilan awal saat halaman pertama kali dimuat
        updateWarning();
      })();
    </script>
  </body>
</html>
